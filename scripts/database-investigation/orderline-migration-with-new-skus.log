ğŸš€ OrderLine Final Migration - Starting...

ğŸ” Checking SKU table schema...
âœ… SKU table columns: [
  'id',           'tenantid',
  'productid',    'code',
  'size',         'unitofmeasure',
  'abv',          'casesperpallet',
  'priceperunit', 'isactive',
  'createdat',    'updatedat'
]
ğŸ” Checking OrderLine table schema...
âœ… OrderLine table columns: [
  'id',
  'orderid',
  'skuid',
  'quantity',
  'unitprice',
  'discount',
  'issample',
  'createdat',
  'appliedpricingrules'
]
ğŸ“‚ Loading UUID mappings...
âœ… Loaded 2401 order mappings
âœ… Loaded 2117 SKU mappings
ğŸ“‚ Loading OrderLine CSV...
âœ… Loaded 7774 OrderLines from CSV

ğŸ“Š Processing 7774 OrderLines...

ğŸ” Building SKU existence cache...
âœ… Cached 1955 SKUs

ğŸ“¦ Importing batch 1 (100 orderlines)...
âœ… Batch 1 imported: 100 orderlines
ğŸ“¦ Importing batch 2 (100 orderlines)...
âœ… Batch 2 imported: 100 orderlines
ğŸ“¦ Importing batch 3 (100 orderlines)...
âœ… Batch 3 imported: 100 orderlines
ğŸ“¦ Importing batch 4 (100 orderlines)...
âœ… Batch 4 imported: 100 orderlines
ğŸ“¦ Importing batch 5 (100 orderlines)...
âœ… Batch 5 imported: 100 orderlines
ğŸ“¦ Importing batch 6 (100 orderlines)...
âœ… Batch 6 imported: 100 orderlines
ğŸ“¦ Importing batch 7 (100 orderlines)...
âœ… Batch 7 imported: 100 orderlines
ğŸ“¦ Importing batch 8 (100 orderlines)...
âœ… Batch 8 imported: 100 orderlines
ğŸ“¦ Importing batch 9 (100 orderlines)...
âœ… Batch 9 imported: 100 orderlines
ğŸ“¦ Importing batch 10 (100 orderlines)...
âœ… Batch 10 imported: 100 orderlines

ğŸ“Š Progress: 1092/7774 processed, 1000 imported

ğŸ“¦ Importing batch 11 (100 orderlines)...
âœ… Batch 11 imported: 100 orderlines
ğŸ“¦ Importing batch 12 (100 orderlines)...
âœ… Batch 12 imported: 100 orderlines
ğŸ“¦ Importing batch 13 (100 orderlines)...
âœ… Batch 13 imported: 100 orderlines
ğŸ“¦ Importing batch 14 (100 orderlines)...
âœ… Batch 14 imported: 100 orderlines
ğŸ“¦ Importing batch 15 (100 orderlines)...
âœ… Batch 15 imported: 100 orderlines
ğŸ“¦ Importing batch 16 (100 orderlines)...
âœ… Batch 16 imported: 100 orderlines
ğŸ“¦ Importing batch 17 (100 orderlines)...
âœ… Batch 17 imported: 100 orderlines
ğŸ“¦ Importing batch 18 (100 orderlines)...
âœ… Batch 18 imported: 100 orderlines
ğŸ“¦ Importing batch 19 (100 orderlines)...
âœ… Batch 19 imported: 100 orderlines
ğŸ“¦ Importing batch 20 (100 orderlines)...
âœ… Batch 20 imported: 100 orderlines

ğŸ“Š Progress: 2197/7774 processed, 2000 imported

ğŸ“¦ Importing batch 21 (100 orderlines)...
âœ… Batch 21 imported: 100 orderlines
ğŸ“¦ Importing batch 22 (100 orderlines)...
âœ… Batch 22 imported: 100 orderlines
ğŸ“¦ Importing batch 23 (100 orderlines)...
âœ… Batch 23 imported: 100 orderlines
ğŸ“¦ Importing batch 24 (100 orderlines)...
âœ… Batch 24 imported: 100 orderlines
ğŸ“¦ Importing batch 25 (100 orderlines)...
âœ… Batch 25 imported: 100 orderlines
ğŸ“¦ Importing batch 26 (100 orderlines)...
âœ… Batch 26 imported: 100 orderlines
ğŸ“¦ Importing batch 27 (100 orderlines)...
âœ… Batch 27 imported: 100 orderlines
ğŸ“¦ Importing batch 28 (100 orderlines)...
âœ… Batch 28 imported: 100 orderlines
ğŸ“¦ Importing batch 29 (100 orderlines)...
âœ… Batch 29 imported: 100 orderlines
ğŸ“¦ Importing batch 30 (100 orderlines)...
âœ… Batch 30 imported: 100 orderlines

ğŸ“Š Progress: 3323/7774 processed, 3000 imported

ğŸ“¦ Importing batch 31 (100 orderlines)...
âœ… Batch 31 imported: 100 orderlines
ğŸ“¦ Importing batch 32 (100 orderlines)...
âœ… Batch 32 imported: 100 orderlines
ğŸ“¦ Importing batch 33 (100 orderlines)...
âœ… Batch 33 imported: 100 orderlines
ğŸ“¦ Importing batch 34 (100 orderlines)...
âœ… Batch 34 imported: 100 orderlines
ğŸ“¦ Importing batch 35 (100 orderlines)...
âœ… Batch 35 imported: 100 orderlines
ğŸ“¦ Importing batch 36 (100 orderlines)...
âœ… Batch 36 imported: 100 orderlines
ğŸ“¦ Importing batch 37 (100 orderlines)...
âœ… Batch 37 imported: 100 orderlines
ğŸ“¦ Importing batch 38 (100 orderlines)...
âœ… Batch 38 imported: 100 orderlines
ğŸ“¦ Importing batch 39 (100 orderlines)...
âœ… Batch 39 imported: 100 orderlines
ğŸ“¦ Importing batch 40 (100 orderlines)...
âœ… Batch 40 imported: 100 orderlines

ğŸ“Š Progress: 4447/7774 processed, 4000 imported

ğŸ“¦ Importing batch 41 (100 orderlines)...
âœ… Batch 41 imported: 100 orderlines
ğŸ“¦ Importing batch 42 (100 orderlines)...
âœ… Batch 42 imported: 100 orderlines
ğŸ“¦ Importing batch 43 (100 orderlines)...
âœ… Batch 43 imported: 100 orderlines
ğŸ“¦ Importing batch 44 (100 orderlines)...
âœ… Batch 44 imported: 100 orderlines
ğŸ“¦ Importing batch 45 (100 orderlines)...
âœ… Batch 45 imported: 100 orderlines
ğŸ“¦ Importing batch 46 (100 orderlines)...
âœ… Batch 46 imported: 100 orderlines
ğŸ“¦ Importing batch 47 (100 orderlines)...
âœ… Batch 47 imported: 100 orderlines
ğŸ“¦ Importing batch 48 (100 orderlines)...
âœ… Batch 48 imported: 100 orderlines
ğŸ“¦ Importing batch 49 (100 orderlines)...
âœ… Batch 49 imported: 100 orderlines
ğŸ“¦ Importing batch 50 (100 orderlines)...
âœ… Batch 50 imported: 100 orderlines

ğŸ“Š Progress: 5570/7774 processed, 5000 imported

ğŸ“¦ Importing batch 51 (100 orderlines)...
âœ… Batch 51 imported: 100 orderlines
ğŸ“¦ Importing batch 52 (100 orderlines)...
âœ… Batch 52 imported: 100 orderlines
ğŸ“¦ Importing batch 53 (100 orderlines)...
âœ… Batch 53 imported: 100 orderlines
ğŸ“¦ Importing batch 54 (100 orderlines)...
âœ… Batch 54 imported: 100 orderlines
ğŸ“¦ Importing batch 55 (100 orderlines)...
âœ… Batch 55 imported: 100 orderlines
ğŸ“¦ Importing batch 56 (100 orderlines)...
âœ… Batch 56 imported: 100 orderlines
ğŸ“¦ Importing batch 57 (100 orderlines)...
âœ… Batch 57 imported: 100 orderlines
ğŸ“¦ Importing batch 58 (100 orderlines)...
âœ… Batch 58 imported: 100 orderlines
ğŸ“¦ Importing batch 59 (100 orderlines)...
âœ… Batch 59 imported: 100 orderlines
ğŸ“¦ Importing batch 60 (100 orderlines)...
âœ… Batch 60 imported: 100 orderlines

ğŸ“Š Progress: 6651/7774 processed, 6000 imported

ğŸ“¦ Importing batch 61 (100 orderlines)...
âœ… Batch 61 imported: 100 orderlines
ğŸ“¦ Importing batch 62 (100 orderlines)...
âœ… Batch 62 imported: 100 orderlines
ğŸ“¦ Importing batch 63 (100 orderlines)...
âœ… Batch 63 imported: 100 orderlines
ğŸ“¦ Importing batch 64 (100 orderlines)...
âœ… Batch 64 imported: 100 orderlines
ğŸ“¦ Importing batch 65 (100 orderlines)...
âœ… Batch 65 imported: 100 orderlines
ğŸ“¦ Importing batch 66 (100 orderlines)...
âœ… Batch 66 imported: 100 orderlines
ğŸ“¦ Importing batch 67 (100 orderlines)...
âœ… Batch 67 imported: 100 orderlines
ğŸ“¦ Importing batch 68 (100 orderlines)...
âœ… Batch 68 imported: 100 orderlines
ğŸ“¦ Importing batch 69 (100 orderlines)...
âœ… Batch 69 imported: 100 orderlines
ğŸ“¦ Importing batch 70 (100 orderlines)...
âœ… Batch 70 imported: 100 orderlines

ğŸ“Š Progress: 7757/7774 processed, 7000 imported

ğŸ“¦ Importing batch 71 (17 orderlines)...
âœ… Batch 71 imported: 17 orderlines

============================================================

ğŸ” Verifying OrderLine integrity...
âœ… Orphaned orderlines: 0
âœ… Orders with orderlines: 373
âœ… Order coverage: 11.65% (373/3202)

============================================================
ğŸ“Š FINAL MIGRATION REPORT
============================================================

ğŸ“ˆ OrderLine Statistics:
  Total WellCrafted OrderLines: 7774
  Total Processed: 7774
  âœ… Successfully Imported: 7017
  â­ï¸  Skipped (No Order Mapping): 757
  â­ï¸  Skipped (No SKU Mapping): 0
  â­ï¸  Skipped (SKU Not in DB): 0
  âŒ Errors: 0
  ğŸ“¦ Batches Processed: 71

ğŸ¯ Coverage Metrics:
  Total OrderLines in Lovable: 11828
  Orders with OrderLines: 373
  Total Orders in Lovable: 3202
  ğŸ“Š Order Coverage: 11.65%

âŒ Target Coverage (70%): NOT MET

âš ï¸  Coverage gap: 58.35%

============================================================
âœ… OrderLine migration complete!
============================================================

ğŸ“„ Detailed report saved to: /Users/greghogue/Leora2/scripts/database-investigation/orderline-migration-report.json

